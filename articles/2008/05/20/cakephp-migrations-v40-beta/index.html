
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Develop With Style: CakePHP Migrations v4.0 Beta</title>
  <meta name="author" content="Joel Moss">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://developwithstyle.com/articles/2008/05/20/cakephp-migrations-v40-beta/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/DevelopingWithStyle" rel="alternate" title="Develop With Style" type="application/atom+xml"/>
  

  

  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Actor|Quattrocento+Sans' rel='stylesheet' type='text/css'>

<style type="text/css" media="screen">
  .carbonad {
    width: 265px !important;
    height: 98px !important;
  }
  .carbonad-text {
    width: 136px !important;
    padding-top: 8px !important;
  }
  .carbonad-image img {
    width: 110px !important;
    height: 80px !important;
  }
  .carbonad-tag {
    width: 136px !important;
  }
</style>
</head>

<body  >
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/DevelopingWithStyle" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:developwithstyle.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Home</a></li>
  <li><a href="/#contact">Contact</a></li>
  <li><a href="/articles">Blog</a></li>
  <li><a href="http://twitter.com/joelmoss">Twitter</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <header><hgroup>
  <h1><a href="/">Develop With Style</a></h1>
</hgroup>

</header>
      <div>
<article class="hentry">
  
  <header>
    
      <h1 class="entry-title">CakePHP Migrations v4.0 Beta</h1>
    
    
      <p class="meta">




<time datetime="2008-05-20 00:00:00 +0100" pubdate  updated >May 20<span>th</span>, 2008</time>


</p>
    
  </header>


<div class="entry-content"><p>I am excited to announce the a beta of the next version of the popular database Migrations shell for CakePHP 1.2. It&#8217;s a little later than expected (I wanted a release candidate out by now) due to a certain muppet who didn&#8217;t commit his changes to SVN!</p>

<p><strong><a href="http://code.google.com/p/cakephp-migrations/downloads/list">Get it now!</a></strong></p>

<p>Take a look at the <a href="http://code.google.com/p/cakephp-migrations/source/browse/trunk/CHANGELOG">ChangeLog</a>, and you will see a few long needed changes. The most notable being the ones discussed <a href="http://developingwithstyle.com/articles/2008/05/05/the-problem-with-migrations.html">earlier</a>. Here&#8217;s the rundown of what you can find in the beta&#8230;</p>

<!--more-->


<p><strong>Timestamped Migrations</strong></p>

<p>All migration files now use the current GMT timestamp of when they were generated. This has been added to almost eradicate any chance of conflicts when working as part of a team.</p>

<p><strong>Interleaved Migrations</strong></p>

<p>This helps solve the problem of migrating out of order or missed migration files. So when you migrate up, it will now run any migrations that have not been run, and when you migrate down, it will ignore migrations that have not been run. To help with this feature, the table that Migrations uses to keep track of the current version has been replaced with one that keeps a record of every migration that has been run.</p>

<p><strong>Migrations love Arrays too</strong></p>

<p>OK, so not everyone likes YAML, so I gave in. Migrations now supports native PHP arrays within your migration files. Something like this:</p>

<div><figure role=code><figcaption><span>php </span></figcaption>
<div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
<span class='line'>6</span>
<span class='line'>7</span>
<span class='line'>8</span>
<span class='line'>9</span>
<span class='line'>10</span>
<span class='line'>11</span>
<span class='line'>12</span>
<span class='line'>13</span>
<span class='line'>14</span>
<span class='line'>15</span>
<span class='line'>16</span>
<span class='line'>17</span>
</pre></td><td class='code' width='100%'><pre><code class=''><div class='line'>$migration = array(
</div><div class='line'>    'up' => array(
</div><div class='line'>        'create_table' => array(
</div><div class='line'>            'rooms' => array(
</div><div class='line'>                'name' => array(
</div><div class='line'>                    'type' => 'string'
</div><div class='line'>                ),
</div><div class='line'>                'topic' => array(
</div><div class='line'>                    'type' => 'text'
</div><div class='line'>                )
</div><div class='line'>            )
</div><div class='line'>        )
</div><div class='line'>    ),
</div><div class='line'>    'down' => array(
</div><div class='line'>        'drop_table' => 'rooms'
</div><div class='line'>    )
</div><div class='line'>);</div></code></pre></td></tr></table></div></figure></div>


<p>In fact, this now means you can use any old PHP code within your migrations. Opens up some nice possibilities.</p>

<p><strong>New command: &#8220;migrate info&#8221;</strong></p>

<p>A new command has been added that shows you the full list of migration files, along with some really useful info, such as what migrations have been run, and when.</p>

<p><strong>Migrating Specific files</strong></p>

<p>You can now also migrate a specific UP or DOWN section from any migration file. How specific is that?</p>

<p>Those are the changes so far, there may well be one or two more to come before the release candidate, but I am still looking into those and will be posting on them very soon. You can also expect to see some bug fixes by the time the release candidate arrives.</p>

<p>So please <a href="http://code.google.com/p/cakephp-migrations/downloads/list">download</a> and play to your hearts content. If you discover any bugs, or if you have any ideas for enhancements and want to see them included in this release, please <a href="http://code.google.com/p/cakephp-migrations/issues/list">create an issue</a>. If you just want to leave a comment and talk to me about this, leave your comment below.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Joel Moss</span></span>

      




<time datetime="2008-05-20 00:00:00 +0100" pubdate  updated >May 20<span>th</span>, 2008</time>



      

<span class="categories">
  
    <a class='category' href='/articles/categories/articles/'>articles</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://developwithstyle.com/articles/2008/05/20/cakephp-migrations-v40-beta/" data-via="joelmoss" data-counturl="http://developwithstyle.com/articles/2008/05/20/cakephp-migrations-v40-beta/" >Tweet</a>
  
  
</div>

    
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread"><div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'dws';
  var disqus_identifier = 'http://developwithstyle.com/articles/2008/05/20/cakephp-migrations-v40-beta/';
  var disqus_url = 'http://developwithstyle.com/articles/2008/05/20/cakephp-migrations-v40-beta/';
  //var disqus_developer = 1;
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside role=sidebar>
  
    <header><hgroup>
  <h1><a href="/">Develop With Style</a></h1>
</hgroup>

</header><section>
  <h1>About Me</h1>
  <p>This site contains the musings of Joel Moss, a web developer of some 13 years; living in Manchester, England. But some say I&#8217;m physically plugged into, and live IN the internet! They may actually be right!</p>
  <p><a href="/">Tell me more&#8230;</a></p>
</section>
<div id="carbonads-container"><div class="carbonad"><div id="carbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/12107/carbon_2_1_0_HORIZ"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div> <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/articles/2011/07/12/the-right-way-to-create-an-api/">The Right Way to Create an API</a>
      </li>
    
      <li class="post">
        <a href="/articles/2010/10/28/from-zero-to-hero-how-i-built-twitious-in-two-weeks/">From Zero to Hero: How I built Twitious in Two Weeks</a>
      </li>
    
      <li class="post">
        <a href="/articles/2010/08/09/dynamic-form-and-dynamic-errors-for-rails-3/">Dynamic Form and Dynamic Errors for Rails 3</a>
      </li>
    
      <li class="post">
        <a href="/articles/2010/07/09/handling-dates-in-mongodb/">Handling Dates in MongoDB</a>
      </li>
    
      <li class="post">
        <a href="/articles/2010/06/29/converting-html-entities-to-characters/">Converting HTML Entities to Characters with Javascript</a>
      </li>
    
      <li class="post">
        <a href="/articles/2010/05/14/jquery-ui-autocomplete-is-it-any-good/">jQuery UI Autocomplete and Caching Query Results</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("joelmoss", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/joelmoss" class="twitter-follow-button" data-width="208px" data-show-count="true">Follow @joelmoss</a>
  
</section>


  
</aside>


    </div>
  </div>
  <footer><p>
  Copyright &copy; 2011 - Joel Moss -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
